name: test_workflow

on: push

jobs:
  jobs1:
    runs-on: ubuntu-latest
      
    name: UnitaryTests

  
    steps:
        - name: Checkout code
          uses: actions/checkout@v3
  
        - name: Set up Python
          uses: actions/setup-python@v4
          with:
            python-version: "3.11.5"
  
        - name: Install dependencies
          run: |
            pip install --upgrade pip
            pip install pytest
            pip install requests
            pip install pandas
            pip install numpy
            pip install imbalanced-learn
            pip install lightgbm
  
        - name: Run tests
          run: pytest
  jobs2:
   needs: jobs1
   runs-on: ubuntu-latest
   name: Deployment
     
   steps:
      - name: Checkout code
        uses: actions/checkout@v3
        with:
          repository: self  

      - name: Deploy to Streamlit
        run: |
          # Votre script de déploiement ici
          # Assurez-vous d'exécuter la commande pour déployer votre application

          # Par exemple, si vous utilisez Streamlit pour déployer :
          pip install streamlit
          streamlit run dash.py  # Remplacez "app.py" par le nom de votre script
        
